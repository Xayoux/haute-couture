library(tidyverse)
library(tidyverse)
library(here)
library(analyse.competitivite)
df_ product <-
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 71),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
library(tidyverse)
library(here)
library(analyse.competitivite)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 71),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
library(tidyverse)
library(here)
library(analyse.competitivite)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 71),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
library(tidyverse)
library(here)
library(analyse.competitivite)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 71),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
library(tidyverse)
library(here)
library(analyse.competitivite)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 71),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
library(tidyverse)
library(here)
library(analyse.competitivite)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 71),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
View(df_product)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 71),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS22",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 71),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS96",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 71),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
df_product |>
filter(str_detect(HS92, "42"))
df_product |>
filter(str_detect(HS92, "^42"))
df_product |>
filter(str_detect(HS92, "^42")) |>
nrow()
df_product |>
filter(str_detect(HS92, "^61|^62|^63")) |>
nrow()
df_product |>
filter(str_detect(HS92, "^64")) |>
nrow()
df_product |>
filter(str_detect(HS92, "^71")) |>
nrow()
22+291+29+52
22+294+40+9
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
df_product |>
filter(str_detect(HS92, "^71")) |>
nrow()
22+294+40+9
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS02",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS96",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS22",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
df_product <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
View(df_product)
codes <- c(42, 61, 62, 64, 6504, 6505, 6506, 7113, 7114, 7116, 7117)
library(concordance)
detach("package:concordance", unload = TRUE)
remove.packages("concordance", lib="~/AppData/Local/R/win-library/4.3")
install_github("insongkim/concordance", dependencies=TRUE)
library(tidyverse)
library(here)
library(analyse.competitivite)
codes <- c(42, 61, 62, 64, 6504, 6505, 6506, 7113, 7114, 7116, 7117)
df_product2 <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits2.xlsx"),
revision_origin = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
df_product2 <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits2.xlsx"),
revision_origin = "HS22",
revision_destination = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = FALSE
)
df_product2 <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits2.xlsx"),
revision_origin = "HS22",
revision_destination = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = TRUE
)
df_product2 <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits2.xlsx"),
revision_origin = "HS17",
revision_destination = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = TRUE
)
df_product2 <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits2.xlsx"),
revision_origin = "HS22",
revision_destination = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = TRUE
)
library(tidyverse)
library(here)
library(analyse.competitivite)
codes <- c(42, 61, 62, 64, 6504, 6505, 6506, 7113, 7114, 7116, 7117)
df_product2 <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits2.xlsx"),
revision_origin = "HS22",
revision_destination = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = TRUE
)
View(df_product2)
df_product2 |>
filter(HS22 != HS92)
codes <- c(4202, 4203, 61, 62, 64, 6504, 6505, 6506, 7113, 7114, 7116, 7117)
df_product2 <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits2.xlsx"),
revision_origin = "HS22",
revision_destination = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = TRUE
)
View(df_product2)
View(df_product2)
codes <- c(4202, 4203, 61, 62, 64, 6504, 6505, 6506, 7113, 7114, 7116, 7117)
df_product2 <-
extract_product(
codes_vector = c(42, 61, 62, 63, 64, 7113, 7114, 7116, 7117),
path_output = here("processed-data", "codes-produits2.xlsx"),
revision_origin = "HS22",
revision_destination = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = TRUE
)
df_product2 <-
extract_product(
codes_vector = codes,
path_output = here("processed-data", "codes-produits2.xlsx"),
revision_origin = "HS22",
revision_destination = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = TRUE
)
View(df_product2)
View(df_product2)
df_product2 |>
filter(HS92!=HS22)
df_product2 |>
filter(HS92!=HS22) |> view()
requireNamespace("devtools", quietly = TRUE)
require("devtools")
if (!require("devtools")) {
install.packages("devtools")
}
if (!require("arrow")) {
install.packages("arrow")
}
install.packages("arrow")
remove.packages("arrow", lib="~/AppData/Local/R/win-library/4.3")
!require("arrow")
if (!require("arrow")) {
install.packages("arrow")
}
remove.packages("glue", lib="~/AppData/Local/R/win-library/4.3")
install.packages("glue")
install.packages("arrow")
install.packages("glue")
#  ------------------------------------------------------------------------
#
# Title : Etude de la compétitivité des produits français de la haute couture
#    By : Romain CAPLIEZ...
#  Date : 2024-03-18
#
#  ------------------------------------------------------------------------
# Importer les librairies utilisées ---------------------------------------
# Tester si devtools est installé. Si ce n'est pas le cas, l'installer
# Permet d'installer le package concordance de github pour pouvoir effectuer
# Des correspondances avec la dernière version de la nomenclature.
if(!require(devtools)) install.packages("devtools")
if(!require(concordance)) install_github("insongkim/concordance", dependencies=TRUE)
library(tidyverse)
library(here)
library(analyse.competitivite)
library(readxl)
library(tictoc)
# Créer la liste des produits à utiliser ----------------------------------
# Vecteur contenant les numéros des chapitres / des sous-sections de la nomenclature pour les produits voulus
chapter_codes <- c(4202, 4203, 61, 62, 64, 6504, 6505, 6506, 7113, 7114, 7116, 7117)
# Créer un dataframe contenant les correspondances entre les codes produits de la nomenclature HS22 et HS92
df_product <-
extract_product(
codes_vector = chapter_codes,
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS22",
revision_destination = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = TRUE
)
# Créer la base de données BACI ------------------------------------------
# Extraire les codes retenus pour la nomenclature HS92
codes_hs <- unique(df_product$HS92)
# Créer la base de données BACI de 2010 à 2022, en ajoutant les codes iso3 et en calculant les valeurs unitaires
create_baci_db(
folder_baci = here("..", "BACI", "BACI_HS92_V202401"),
year_start = 2010,
year_end = 2022,
hs_codes = codes_hs,
add_iso3 = TRUE,
calc_uv = TRUE,
path_output = here("processed-data", "baci_db.csv"),
return_output = FALSE
)
here("..", "BACI", "BACI_HS92_V202401") |>
list.files()
#  ------------------------------------------------------------------------
#
# Title : Etude de la compétitivité des produits français de la haute couture
#    By : Romain CAPLIEZ...
#  Date : 2024-03-18
#
#  ------------------------------------------------------------------------
# Importer les librairies utilisées ---------------------------------------
# Tester si devtools est installé. Si ce n'est pas le cas, l'installer
# Permet d'installer le package concordance de github pour pouvoir effectuer
# Des correspondances avec la dernière version de la nomenclature.
if(!require(devtools)) install.packages("devtools")
if(!require(concordance)) install_github("insongkim/concordance", dependencies=TRUE)
library(tidyverse)
library(here)
library(analyse.competitivite)
library(readxl)
library(tictoc)
# Créer la liste des produits à utiliser ----------------------------------
# Vecteur contenant les numéros des chapitres / des sous-sections de la nomenclature pour les produits voulus
chapter_codes <- c(4202, 4203, 61, 62, 64, 6504, 6505, 6506, 7113, 7114, 7116, 7117)
# Créer un dataframe contenant les correspondances entre les codes produits de la nomenclature HS22 et HS92
df_product <-
extract_product(
codes_vector = chapter_codes,
path_output = here("processed-data", "codes-produits.xlsx"),
revision_origin = "HS22",
revision_destination = "HS92",
export = TRUE,
return_df = TRUE,
correspondance = TRUE
)
# Créer la base de données BACI ------------------------------------------
# Extraire les codes retenus pour la nomenclature HS92
codes_hs <- unique(df_product$HS92)
# Créer la base de données BACI de 2010 à 2022, en ajoutant les codes iso3 et en calculant les valeurs unitaires
create_baci_db(
folder_baci = here("..", "BACI", "BACI_HS92_V202401"),
year_start = 2010,
year_end = 2022,
hs_codes = codes_hs,
add_iso3 = TRUE,
calc_uv = TRUE,
path_output = here("processed-data", "baci_db.csv"),
return_output = FALSE
)
